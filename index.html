<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>부동산 PWA</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css"> </head>
<body>
  <header>
    <h1>부동산 매물 및 매수자 등록</h1>
  </header>

  <div id="navbar">
    <button id="homeBtn">홈</button>
    <button id="mapBtn">지도</button>
    <button id="sellBtn">매물등록</button>
    <button id="buyBtn">매수등록</button>
  </div>

  <section id="homeSection">
    <h2>최근 등록 매물</h2>
    <div id="recentListings">
      </div>
  </section>

  <section id="sellSection" style="display: none;">
    <h2>매물 등록</h2>
    <form id="sellForm">
      <label for="itemType">종류:</label>
      <input type="text" id="itemType" placeholder="예: 아파트" required>

      <label for="price">가격 (만원):</label>
      <input type="number" id="price" placeholder="예: 50000" required>

      <label for="address">주소:</label>
      <input type="text" id="address" placeholder="예: 서울시 종로구 새문안로 68" required>

      <button type="submit">등록하기</button>
    </form>
  </section>

  <section id="buySection" style="display: none;">
    <h2>매수 등록</h2>
    <form id="buyForm">
      <label for="buyType">찾는 매물 종류:</label>
      <input type="text" id="buyType" placeholder="예: 아파트" required>

      <label for="maxPrice">희망 최대가격 (만원):</label>
      <input type="number" id="maxPrice" placeholder="예: 50000" required>

      <label for="buyAddress">희망 지역:</label>
      <input type="text" id="buyAddress" placeholder="예: 서울시 종로구" required>

      <button type="submit">등록하기</button>
    </form>
  </section>

  <section id="mapSection" style="display: none;">
    <div id="map"></div>
  </section>

  <script type="module">
    // ... (Firebase 설정 및 초기화 코드)

    // 섹션 관리
    const sections = {
      homeSection: document.getElementById('homeSection'),
      sellSection: document.getElementById('sellSection'),
      buySection: document.getElementById('buySection'),
      mapSection: document.getElementById('mapSection')
    };

    function showSection(sectionId) {
      Object.entries(sections).forEach(([id, element]) => {
        element.style.display = id === sectionId ? 'block' : 'none';
      });
    }

    // 탐색 버튼 클릭 이벤트 리스너
    document.getElementById('homeBtn').addEventListener('click', () => showSection('homeSection'));
    document.getElementById('mapBtn').addEventListener('click', () => showSection('mapSection'));
    document.getElementById('sellBtn').addEventListener('click', () => showSection('sellSection'));
    document.getElementById('buyBtn').addEventListener('click', () => showSection('buySection'));

    // ... (지도 초기화 코드)

    // 폼 제출 이벤트 리스너
    document.getElementById('sellForm').addEventListener('submit', (e) => {
      e.preventDefault();
      // ... (매물 등록 로직)
    });

    document.getElementById('buyForm').addEventListener('submit', (e) => {
      e.preventDefault();
      // ... (매수 등록 로직)
    });

    // ... (최근 매물 목록 업데이트 코드)

    // Service Worker 등록
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js')
          .then((registration) => {
            console.log('Service Worker 등록 성공:', registration);
          })
          .catch((error) => {
            console.error('Service Worker 등록 실패:', error);
          });
      });
    }
  </script>
</body>
</html>